<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:dg="clr-namespace:Maui.DataGrid;assembly=Maui.DataGrid"
             x:Class="tiktokagent.MainPage"
             xmlns:viewModels="clr-namespace:tiktokagent.ViewModel"
             x:DataType="viewModels:MainPageVm"
             Title="Dashboard">


    <Grid RowDefinitions="1*" ColumnDefinitions="500,1*" Padding="20" Margin="10">
        <Grid  Grid.Column="0" >
            <dg:DataGrid 
             ItemsSource="{Binding Accounts}" 
             SelectedItem="{Binding SelectedAccount}"
             RowHeight="20" 
             HeaderHeight="50" 
             BorderColor="White"
             HeaderBackground="White" 
             HeaderBordersVisible="True"
             PaginationEnabled="True" 
             RefreshingEnabled="True"
             IsRefreshing="{Binding Loading}"
             PageSize="15">
                <dg:DataGrid.Columns>
                    <dg:DataGridColumn Title="Email" PropertyName="Email" Width="200"/>
                    <dg:DataGridColumn Title="Username" PropertyName="Username"/>
                    <dg:DataGridColumn Title="¨Password" PropertyName="Password"/>
                    <dg:DataGridColumn Title="Status" PropertyName="Status" Width="0.75*" StringFormat="{}{0:0.00}" />
                </dg:DataGrid.Columns>
            </dg:DataGrid>
        </Grid>


        <Grid Grid.Column="1" RowDefinitions="1*,1*,Auto,150" ColumnDefinitions="1*" >
            <Label
                Grid.Row="1"
                Text="{Binding Accounts.Count, StringFormat='Nombre de compte généré: {0:N0}'}"
                SemanticProperties.HeadingLevel="Level1"
                FontSize="32"
                HorizontalOptions="Center" />   
            
            <FlexLayout Direction="Row" AlignItems="End" JustifyContent="SpaceEvenly" Grid.Row="3" Padding="20">
                <StackLayout Spacing="10">
                    <Entry 
                      PlaceholderColor="White" 
                      Placeholder="Nombre de compte à choisir" 
                      Keyboard="Numeric" 
                      x:Name="NumberOfAccountEntry"
                      Text="{Binding NumberOfAccount, Mode=TwoWay}"
                      MaximumWidthRequest="290"
                      BackgroundColor="Black"/>

                    <Button
                      x:Name="GenerateAccount"
                      Text="{Binding NumberOfAccount, StringFormat='Génémrer {0:N0} compte(s) Tiktok'}"
                      Command="{Binding CreateRandomAccountsCommand}"
                      SemanticProperties.Hint="Counts the number of times you click"
                      Clicked="OnStart"
                      HorizontalOptions="Center"
                      VerticalOptions="End"
                      />
                </StackLayout>

                <Button
                   Text="Charger des comptes"
                   Command="{Binding LoadSavedAccountsCommand }"
                   SemanticProperties.Hint="Counts the number of times you click"
                   Clicked="OnStart"  
                   HorizontalOptions="End"
                   VerticalOptions="Center"
                   />


                <Button
                  x:Name="OnStartBtn"
                  Text="{Binding TextOnStartButton}"
                  Command="{Binding StartBottingCommand}"
                  SemanticProperties.Hint="Counts the number of times you click"
                  Clicked="OnStart"  
                  HorizontalOptions="End"
                  VerticalOptions="Center"
                  />           
                
           
            </FlexLayout>

        </Grid>
       

    </Grid>
</ContentPage>